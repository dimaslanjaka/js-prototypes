/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable @typescript-eslint/no-this-alias */
/* eslint-disable @typescript-eslint/triple-slash-reference */
/* eslint-disable prefer-rest-params */
/* eslint-disable no-prototype-builtins */
/// <reference path="./globals.d.ts" />
const _global = (typeof window != 'undefined' ? window : global) /* node */;
Array.prototype.shuffle = function () {
    let i = this.length, j, temp;
    if (i == 0)
        return this;
    while (--i) {
        j = Math.floor(Math.random() * (i + 1));
        temp = this[i];
        this[i] = this[j];
        this[j] = temp;
    }
    return this;
};
Array.prototype.last = function (n) {
    if (!n) {
        if (this.length === 0)
            return undefined;
        return this[this.length - 1];
    }
    else {
        let start = this.length - n;
        if (start < 0)
            start = 0;
        return this.slice(start, this.length);
    }
};
Array.prototype.trim = function () {
    return this.map((str) => {
        if (typeof str == 'string')
            return str.trim();
    });
};
Array.prototype.isEmpty = function () {
    return this.length === 0;
};
Array.prototype.range = function (start, end) {
    if (end < start) {
        return [];
    }
    return this.slice(start, end + 1);
};
Array.prototype.add = function (element) {
    this.push(element);
    return this;
};
Array.prototype.addAll = function (...otherArrays) {
    const self = this;
    otherArrays.forEach(function (array) {
        array.forEach((item) => {
            self.push(item);
        });
    });
    return self;
};
Array.prototype.random = function () {
    return this[Math.floor(Math.random() * this.length)];
};
Array.prototype.unique = function () {
    const a = this.concat();
    for (let i = 0; i < a.length; ++i) {
        for (let j = i + 1; j < a.length; ++j) {
            if (a[i] === a[j])
                a.splice(j--, 1);
        }
    }
    return a;
};
Array.prototype.uniqueStringArray = function () {
    const filter = new Map(this.map((s) => [s.toLowerCase(), s]));
    return [...filter.values()];
};
Array.prototype.uniqueObjectKey = function (key, removeNull = true) {
    if (!key)
        return this;
    const resArr = [];
    this.filter(function (item) {
        const i = resArr.findIndex((x) => x[key] == item[key]);
        if (i <= -1) {
            if (removeNull) {
                if (item[key])
                    resArr.push(item);
            }
            else {
                resArr.push(item);
            }
        }
        return null;
    });
    return resArr;
};
Array.prototype.contains = function (obj) {
    let i = this.length;
    while (i--) {
        if (this[i] === obj) {
            return true;
        }
    }
    return false;
};
Array.prototype.hasIndex = function (n) {
    return typeof this[n] != 'undefined';
};
Array.prototype.first = function (n) {
    if (!n) {
        if (this.length === 0)
            return undefined;
        return this[0];
    }
    else {
        if (this.length === 0)
            return [];
        return this.slice(0, n);
    }
};
Array.prototype.compact = function () {
    //var changes = false;
    for (let i = 0; i < this.length; i++) {
        // If element is non-existent, undefined or null, remove it.
        if (!this[i]) {
            this.splice(i, 1);
            i = i - 1;
            //changes = true;
        }
    }
    //if (!changes) return undefined;
    return this;
};
Array.prototype.deleteAt = function (index) {
    if (index < 0)
        index = this.length + index;
    // If element is non-existent, return undefined:
    if (!this.hasOwnProperty(index))
        return undefined;
    const elem = this[index];
    this.splice(index, 1);
    return elem;
};
Array.prototype.unset = function (value) {
    if (this.indexOf(value) != -1) {
        // Make sure the value exists
        this.splice(this.indexOf(value), 1);
    }
    return this;
};
Array.prototype.exists = function (n) {
    return typeof this[n] !== 'undefined';
};
if (!Array.prototype.hasOwnProperty('every')) {
    Array.prototype.every = function (fun /*, thisp */) {
        'use strict';
        const t = Object(this);
        const len = t.length >>> 0;
        let i;
        const thisp = arguments[1];
        if (this == null) {
            throw new TypeError();
        }
        if (typeof fun !== 'function') {
            throw new TypeError();
        }
        for (i = 0; i < len; i++) {
            if (i in t && !fun.call(thisp, t[i], i, t)) {
                return false;
            }
        }
        return true;
    };
}
Array.prototype.move = function (from, to) {
    const itemRemoved = this.splice(from, 1); // splice() returns the remove element as an array
    this.splice(to, 0, itemRemoved[0]); // Insert itemRemoved into the target index
    return this;
};
Array.prototype.hapusItemDariArrayLain = function (...arrayLain) {
    let thisArr = this;
    arrayLain.forEach((otherArr) => {
        thisArr = thisArr.filter(function (el) {
            return !otherArr.includes(el);
        });
    });
    return thisArr;
};
Array.prototype.removeEmpties = function () {
    const filter = this.filter(function (el) {
        const notnull = 
        // make sure element is not null
        el != null &&
            // make sure element is not undefined
            typeof el != 'undefined';
        // if element is string, make sure string length not zero
        if (typeof el == 'string') {
            return notnull && el.trim().length > 0;
        }
        return notnull;
    });
    return filter;
};
/**
 * split array to chunks
 * @param sourceArray
 * @param chunkSize
 * @see {@link https://stackoverflow.com/a/71483760/6404439}
 * @returns
 * @example
let ar1 = [
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
];
// split array by 4
console.log("Split in chunks with 4 size", splitChunks(ar1, 4)); // [[1,2,3,4], [5,6,7,8]...]
 */
function array_split_chunks(sourceArray, chunkSize) {
    if (chunkSize <= 0)
        throw 'chunkSize must be greater than 0';
    const result = [];
    for (let i = 0; i < sourceArray.length; i += chunkSize) {
        result[i / chunkSize] = sourceArray.slice(i, i + chunkSize);
    }
    return result;
}
_global.array_split_chunks = array_split_chunks;
Array.prototype.split_chunks = function (size) {
    return array_split_chunks(this, size);
};
function array_filter(array) {
    return array.filter(function (el) {
        return el != null;
    });
}
_global.array_filter = array_filter;
/**
 * pick random from array
 * @param {Array<any>} arrays
 * @param {boolean} unique Unique the arrays
 */
function array_rand(arrays, unique) {
    if (unique) {
        arrays = array_unique(arrays);
    }
    const index = Math.floor(Math.random() * arrays.length);
    return {
        index: index,
        value: arrays[index],
    };
}
_global.array_rand = array_rand;
/**
 * Array unique
 * @param {Array<any>} arrays
 */
function array_unique(arrays) {
    return arrays.filter(function (item, pos, self) {
        return self.indexOf(item) == pos;
    });
}
_global.array_unique = array_unique;
/**
 * Unset array
 * @param {Array<any>} arrayName
 * @param {String|number} key
 */
// eslint-disable-next-line @typescript-eslint/no-unused-vars
function array_unset(arrayName, key) {
    let x;
    const tmpArray = [];
    for (x in arrayName) {
        if (x != key) {
            tmpArray[x] = arrayName[x];
        }
    }
    return tmpArray;
}
_global.array_unset = array_unset;
/**
 * PHP shuffle array equivalent
 * @param array
 * @example
 * var arr = [2, 11, 37, 42];
 * shuffle(arr);
 * console.log(arr); //return random
 */
// eslint-disable-next-line @typescript-eslint/no-unused-vars
function shuffle(array) {
    let currentIndex = array.length, temporaryValue, randomIndex;
    // While there remain elements to shuffle...
    while (0 !== currentIndex) {
        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;
        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
    }
    return array;
}
_global.shuffle = shuffle;
function arrayCompare(a1, a2) {
    if (a1.length != a2.length)
        return false;
    const length = a2.length;
    for (let i = 0; i < length; i++) {
        if (a1[i] !== a2[i])
            return false;
    }
    return true;
}
_global.arrayCompare = arrayCompare;
/**
 * in_array PHP equivalent
 * @param needle string etc
 * @param haystack
 */
function inArray(needle, haystack) {
    const length = haystack.length;
    for (let i = 0; i < length; i++) {
        if (typeof haystack[i] == 'object') {
            if (arrayCompare(haystack[i], needle))
                return true;
        }
        else {
            if (haystack[i] == needle)
                return true;
        }
    }
    return false;
}
/**
 * in_array PHP equivalent
 * @param needle string etc
 * @param haystack
 */
function in_array(needle, haystack) {
    return inArray(needle, haystack);
}
_global.in_array = in_array;
/**
 * get all keys
 * @param haystack string etc
 */
function array_keys(haystack) {
    return Object.keys(haystack);
}
/**
 * Shuffles array in place.
 * @param a items An array containing the items.
 */
function array_shuffle(a) {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}
_global.array_shuffle = array_shuffle;
/**
 * Deep merge two or more objects into the first.
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param objects  The objects to merge together
 * @returns Merged values of defaults and options
 */
function deepAssign(...objects) {
    // Make sure there are objects to merge
    const len = objects.length;
    if (len < 1)
        return;
    if (len < 2)
        return objects[0];
    // Merge all objects into first
    for (let i = 1; i < len; i++) {
        for (const key in objects[i]) {
            if (objects[i].hasOwnProperty(key)) {
                // If it's an object, recursively merge
                // Otherwise, push to key
                if (Object.prototype.toString.call(objects[i][key]) === '[object Object]') {
                    objects[0][key] = deepAssign(objects[0][key] || {}, objects[i][key]);
                }
                else {
                    objects[0][key] = objects[i][key];
                }
            }
        }
    }
    return arguments[0];
}
_global.deepAssign = deepAssign;
/**
 * Remove item from array
 * @param arr
 * @param value
 * @returns
 */
function removeItem(arr, value) {
    const index = arr.indexOf(value);
    if (index > -1) {
        arr.splice(index, 1);
    }
    return arr;
}
_global.removeItem = removeItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXJyYXkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQXJyYXkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsc0RBQXNEO0FBQ3RELHFEQUFxRDtBQUNyRCw4REFBOEQ7QUFDOUQsdUNBQXVDO0FBQ3ZDLDBDQUEwQztBQUMxQyx1Q0FBdUM7QUFDdkMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxPQUFPLE1BQU0sSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBaUIsQ0FBQztBQWlNbkYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUc7SUFDeEIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFDakIsQ0FBUyxFQUNULElBQVMsQ0FBQztJQUNaLElBQUksQ0FBQyxJQUFJLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQztJQUN4QixPQUFPLEVBQUUsQ0FBQyxFQUFFO1FBQ1YsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztLQUNoQjtJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBRUYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDO0lBQ2hDLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDTixJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQztZQUFFLE9BQU8sU0FBUyxDQUFDO1FBRXhDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDOUI7U0FBTTtRQUNMLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksS0FBSyxHQUFHLENBQUM7WUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRXpCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3ZDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDckIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFDdEIsSUFBSSxPQUFPLEdBQUcsSUFBSSxRQUFRO1lBQUUsT0FBTyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDaEQsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFFRixLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRztJQUN4QixPQUFPLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO0FBQzNCLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFVBQVUsS0FBSyxFQUFFLEdBQUc7SUFDMUMsSUFBSSxHQUFHLEdBQUcsS0FBSyxFQUFFO1FBQ2YsT0FBTyxFQUFFLENBQUM7S0FDWDtJQUNELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3BDLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHLFVBQVUsT0FBTztJQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ25CLE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBRUYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBVSxHQUFHLFdBQVc7SUFDL0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ2xCLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBVSxLQUFLO1FBQ2pDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHO0lBQ3ZCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHO0lBQ3ZCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUN4QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtRQUNqQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUU7WUFDckMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3JDO0tBQ0Y7SUFFRCxPQUFPLENBQUMsQ0FBQztBQUNYLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEdBQUc7SUFDbEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlELE9BQU8sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQzlCLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsZUFBZSxHQUFHLFVBQWdELEdBQUcsRUFBRSxVQUFVLEdBQUcsSUFBSTtJQUN0RyxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sSUFBSSxDQUFDO0lBQ3RCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNsQixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSTtRQUN4QixNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUU7WUFDWCxJQUFJLFVBQVUsRUFBRTtnQkFDZCxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUM7b0JBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNsQztpQkFBTTtnQkFDTCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ25CO1NBQ0Y7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUMsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDO0FBRUYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxHQUFHO0lBQ3RDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDcEIsT0FBTyxDQUFDLEVBQUUsRUFBRTtRQUNWLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNuQixPQUFPLElBQUksQ0FBQztTQUNiO0tBQ0Y7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBUztJQUM1QyxPQUFPLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQztBQUN2QyxDQUFDLENBQUM7QUFFRixLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUM7SUFDakMsSUFBSSxDQUFDLENBQUMsRUFBRTtRQUNOLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQUUsT0FBTyxTQUFTLENBQUM7UUFFeEMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEI7U0FBTTtRQUNMLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQUUsT0FBTyxFQUFFLENBQUM7UUFFakMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUN6QjtBQUNILENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHO0lBQ3hCLHNCQUFzQjtJQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNwQyw0REFBNEQ7UUFDNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNaLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1YsaUJBQWlCO1NBQ2xCO0tBQ0Y7SUFDRCxpQ0FBaUM7SUFFakMsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDLENBQUM7QUFFRixLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUF3QixLQUFLO0lBQ3RELElBQUksS0FBSyxHQUFHLENBQUM7UUFBRSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFFM0MsZ0RBQWdEO0lBQ2hELElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQztRQUFFLE9BQU8sU0FBUyxDQUFDO0lBRWxELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN0QixPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFVBQVUsS0FBSztJQUNyQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDN0IsNkJBQTZCO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUNyQztJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBRUYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFTO0lBQzFDLE9BQU8sT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssV0FBVyxDQUFDO0FBQ3hDLENBQUMsQ0FBQztBQUVGLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBRTtJQUM1QyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxVQUFVLEdBQVEsQ0FBQyxZQUFZO1FBQ3JELFlBQVksQ0FBQztRQUNiLE1BQU0sQ0FBQyxHQUF5QyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0QsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFrQixDQUFDO1FBQ3ZCLE1BQU0sS0FBSyxHQUFRLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVoQyxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUU7WUFDaEIsTUFBTSxJQUFJLFNBQVMsRUFBRSxDQUFDO1NBQ3ZCO1FBRUQsSUFBSSxPQUFPLEdBQUcsS0FBSyxVQUFVLEVBQUU7WUFDN0IsTUFBTSxJQUFJLFNBQVMsRUFBRSxDQUFDO1NBQ3ZCO1FBRUQsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDMUMsT0FBTyxLQUFLLENBQUM7YUFDZDtTQUNGO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDLENBQUM7Q0FDSDtBQUVELEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLFVBQVUsSUFBSSxFQUFFLEVBQUU7SUFDdkMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrREFBa0Q7SUFDNUYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMkNBQTJDO0lBQy9FLE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBRUYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsR0FBRyxVQUF1QixHQUFHLFNBQVM7SUFDMUUsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDO0lBQ25CLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtRQUM3QixPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUU7WUFDbkMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sT0FBTyxDQUFDO0FBQ2pCLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHO0lBQzlCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFnQjtRQUNuRCxNQUFNLE9BQU87UUFDWCxnQ0FBZ0M7UUFDaEMsRUFBRSxJQUFJLElBQUk7WUFDVixxQ0FBcUM7WUFDckMsT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDO1FBQzNCLHlEQUF5RDtRQUN6RCxJQUFJLE9BQU8sRUFBRSxJQUFJLFFBQVEsRUFBRTtZQUN6QixPQUFPLE9BQU8sSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztTQUN4QztRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDO0FBRUY7Ozs7Ozs7Ozs7OztHQVlHO0FBQ0gsU0FBUyxrQkFBa0IsQ0FBa0IsV0FBYyxFQUFFLFNBQWlCO0lBQzVFLElBQUksU0FBUyxJQUFJLENBQUM7UUFBRSxNQUFNLGtDQUFrQyxDQUFDO0lBQzdELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNsQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksU0FBUyxFQUFFO1FBQ3RELE1BQU0sQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO0tBQzdEO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQUNELE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztBQUNoRCxLQUFLLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxVQUFVLElBQUk7SUFDM0MsT0FBTyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDeEMsQ0FBQyxDQUFDO0FBRUYsU0FBUyxZQUFZLENBQUMsS0FBUztJQUM3QixPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO1FBQzlCLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQztJQUNwQixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFDRCxPQUFPLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztBQUVwQzs7OztHQUlHO0FBQ0gsU0FBUyxVQUFVLENBQUMsTUFBYSxFQUFFLE1BQVc7SUFDNUMsSUFBSSxNQUFNLEVBQUU7UUFDVixNQUFNLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQy9CO0lBQ0QsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3hELE9BQU87UUFDTCxLQUFLLEVBQUUsS0FBSztRQUNaLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDO0tBQ3JCLENBQUM7QUFDSixDQUFDO0FBQ0QsT0FBTyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7QUFFaEM7OztHQUdHO0FBQ0gsU0FBUyxZQUFZLENBQUMsTUFBYTtJQUNqQyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFTLEVBQUUsR0FBUSxFQUFFLElBQW9CO1FBQ3RFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUM7SUFDbkMsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBQ0QsT0FBTyxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7QUFFcEM7Ozs7R0FJRztBQUNILDZEQUE2RDtBQUM3RCxTQUFTLFdBQVcsQ0FBQyxTQUErQixFQUFFLEdBQVE7SUFDNUQsSUFBSSxDQUFrQixDQUFDO0lBQ3ZCLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNwQixLQUFLLENBQUMsSUFBSSxTQUFTLEVBQUU7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFO1lBQ1osUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM1QjtLQUNGO0lBQ0QsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQUNELE9BQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0FBRWxDOzs7Ozs7O0dBT0c7QUFDSCw2REFBNkQ7QUFDN0QsU0FBUyxPQUFPLENBQUMsS0FBaUI7SUFDaEMsSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFDN0IsY0FBbUIsRUFDbkIsV0FBbUIsQ0FBQztJQUV0Qiw0Q0FBNEM7SUFDNUMsT0FBTyxDQUFDLEtBQUssWUFBWSxFQUFFO1FBQ3pCLDhCQUE4QjtRQUM5QixXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLENBQUM7UUFDdkQsWUFBWSxJQUFJLENBQUMsQ0FBQztRQUVsQix3Q0FBd0M7UUFDeEMsY0FBYyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNyQyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxjQUFjLENBQUM7S0FDckM7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFDRCxPQUFPLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUUxQixTQUFTLFlBQVksQ0FBQyxFQUFjLEVBQUUsRUFBYztJQUNsRCxJQUFJLEVBQUUsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLE1BQU07UUFBRSxPQUFPLEtBQUssQ0FBQztJQUN6QyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDO0lBQ3pCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDL0IsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUFFLE9BQU8sS0FBSyxDQUFDO0tBQ25DO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBQ0QsT0FBTyxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7QUFFcEM7Ozs7R0FJRztBQUNILFNBQVMsT0FBTyxDQUFDLE1BQVcsRUFBRSxRQUFvQjtJQUNoRCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO0lBQy9CLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDL0IsSUFBSSxPQUFPLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLEVBQUU7WUFDbEMsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQztnQkFBRSxPQUFPLElBQUksQ0FBQztTQUNwRDthQUFNO1lBQ0wsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTTtnQkFBRSxPQUFPLElBQUksQ0FBQztTQUN4QztLQUNGO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILFNBQVMsUUFBUSxDQUFDLE1BQVcsRUFBRSxRQUFvQjtJQUNqRCxPQUFPLE9BQU8sQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUNELE9BQU8sQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0FBRTVCOzs7R0FHRztBQUNILFNBQVMsVUFBVSxDQUFDLFFBQWE7SUFDL0IsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLENBQUM7QUFFRDs7O0dBR0c7QUFDSCxTQUFTLGFBQWEsQ0FBQyxDQUFhO0lBQ2xDLElBQUksQ0FBUyxFQUFFLENBQU0sRUFBRSxDQUFTLENBQUM7SUFDakMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNqQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ1QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNaLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDVjtJQUNELE9BQU8sQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUNELE9BQU8sQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO0FBRXRDOzs7OztHQUtHO0FBQ0gsU0FBUyxVQUFVLENBQUMsR0FBRyxPQUErQjtJQUNwRCx1Q0FBdUM7SUFDdkMsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUMzQixJQUFJLEdBQUcsR0FBRyxDQUFDO1FBQUUsT0FBTztJQUNwQixJQUFJLEdBQUcsR0FBRyxDQUFDO1FBQUUsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFL0IsK0JBQStCO0lBQy9CLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDNUIsS0FBSyxNQUFNLEdBQUcsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDNUIsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNsQyx1Q0FBdUM7Z0JBQ3ZDLHlCQUF5QjtnQkFDekIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssaUJBQWlCLEVBQUU7b0JBQ3pFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQU0sT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztpQkFDaEY7cUJBQU07b0JBQ0wsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDbkM7YUFDRjtTQUNGO0tBQ0Y7SUFFRCxPQUFPLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0QixDQUFDO0FBQ0QsT0FBTyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7QUFFaEM7Ozs7O0dBS0c7QUFDSCxTQUFTLFVBQVUsQ0FBSSxHQUFhLEVBQUUsS0FBUTtJQUM1QyxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFFO1FBQ2QsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDdEI7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFDRCxPQUFPLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC90cmlwbGUtc2xhc2gtcmVmZXJlbmNlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItcmVzdC1wYXJhbXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvdHlwZS1idWlsdGlucyAqL1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vZ2xvYmFscy5kLnRzXCIgLz5cbmNvbnN0IF9nbG9iYWwgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbCkgLyogbm9kZSAqLyBhcyBhbnk7XG5cbi8qKlxuICogQXJyYXlzXG4gKi9cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gIC8qKlxuICAgKiBVbmlxdWUgQXJyYXlcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGR1cGxpY2F0ZSA9IFsxLDIsMSwyLDMsNCw1LDZdO1xuICAgKiB2YXIgdW5pcXVlID0gZHVwbGljYXRlLnVuaXF1ZSgpOyAvLyBbMSwyLDMsNCw1LDZdXG4gICAqL1xuICB1bmlxdWU6ICgpID0+IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBVbmlxdWUgc3RyaW5nIGFycmF5IGNhc2UgaW5zZW5zaXRpdmUgYnV0IGtlZXAgb25lIGNhc2Ugc2Vuc2l0aXZlIHJlc3VsdFxuICAgKiBAc2VlIHtAbGluayBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDg3MzE0NDUvNjQwNDQzOX1cbiAgICogQGV4YW1wbGVcbiAgICogY29uc29sZS5sb2coWydKYW1lcycsICdqYW1lcycsICdib2InLCAnSmFNZVMnLCAnQm9iJ10udW5pcXVlU3RyaW5nQXJyYXkoKSk7IC8vIFtcIkphTWVTXCIsIFwiQm9iXCJdXG4gICAqL1xuICB1bmlxdWVTdHJpbmdBcnJheTogKCkgPT4gQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogTW92ZSBpdGVtIHRvIGFub3RoZXIgaW5kZXhcbiAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzcwNjE4NzkxLzY0MDQ0Mzl9XG4gICAqL1xuICBtb3ZlOiAoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSA9PiBBcnJheTxUPjtcblxuICAvKipcbiAgICogVW5pcXVlIGFycmF5IG9mIG9iamVjdHMgYnkga2V5XG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MTUzNzg4N31cbiAgICogQHBhcmFtIGtleSBvYmplY3Qga2V5IHRvIGNoZWNrXG4gICAqIEBwYXJhbSByZW1vdmVOdWxsIHJlbW92ZSBudWxsIGFuZCB1bmRlZmluZWQgKGRlZmF1bHQ9dHJ1ZSlcbiAgICovXG4gIHVuaXF1ZU9iamVjdEtleTogKGtleTogc3RyaW5nLCByZW1vdmVOdWxsPzogYm9vbGVhbikgPT4gQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhcnJheSBpdGVtIGZyb20gb3RoZXIgYXJyYXlzXG4gICAqL1xuICBoYXB1c0l0ZW1EYXJpQXJyYXlMYWluOiAoLi4uYXJyYXlMYWluOiBhbnlbXSkgPT4gYW55W107XG5cbiAgLyoqXG4gICAqIFBpY2sgMSByYW5kb20gYXJyYXkgZWxlbWVudFxuICAgKi9cbiAgcmFuZG9tOiA8VD4oKSA9PiBUO1xuXG4gIC8qKlxuICAgKiBzcGxpdCBhcnJheSB0byBjaHVua3NcbiAgICogQHBhcmFtIHNpemUgZGl2aWRlZCBhcnJheSBieSBudW1iZXIgaW5kZXhcbiAgICovXG4gIHNwbGl0X2NodW5rczogKHNpemU6IG51bWJlcikgPT4gUmV0dXJuVHlwZTx0eXBlb2YgYXJyYXlfc3BsaXRfY2h1bmtzPjtcblxuICAvKipcbiAgICogQWRkIEVsZW1lbnRcbiAgICogQHBhcmFtIGVsZW1lbnRcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGEgPSBbMSwyXTtcbiAgICogYS5hZGQoMyk7XG4gICAqIGNvbnNvbGUubG9nKGEpOyAvLyBbMSwyLDNdXG4gICAqXG4gICAqIHZhciBiID0gWzAsOV07XG4gICAqIGNvbnNvbGUubG9nKGIuYWRkKDIpKTsgLy8gWzAsOSwyXVxuICAgKi9cbiAgYWRkKGVsZW1lbnQ6IGFueSk6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBAc3VtbWFyeSBBZGQgYW5vdGhlciBhcnJheVxuICAgKiBAZGVzY3JpcHRpb24gQWRkIGFub3RoZXIgYXJyYXkgdG8gY3VycmVudCBhcnJheVxuICAgKiBAcGFyYW0gYW5vdGhlckFycmF5XG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBhID0gWzAsMV07XG4gICAqIHZhciBiID0gWydhJywnYiddO1xuICAgKiBjb25zb2xlLmxvZyhiLmFkZEFsbChhKSk7IC8vIFsnYScsJ2InLDAsMV1cbiAgICogdmFyIGMgPSBbJ3onLDEwXTtcbiAgICogYy5hZGRBbGwoYik7XG4gICAqIGNvbnNvbGUubG9nKGMpOyAvLyBbJ3onLDEwLCdhJywnYicsMCwxXVxuICAgKiB2YXIgZCA9IFsnbGFzdCddOlxuICAgKiBkLmFkZEFsbChhLGIsYyk7XG4gICAqIGNvbnNvbGUubG9nKGQpOyAvLyBbJ2xhc3QnLCdhJywnYicsMCwxXVxuICAgKi9cbiAgYWRkQWxsKC4uLmFub3RoZXJBcnJheTogQXJyYXk8YW55Pik6IEFycmF5PGFueT47XG5cbiAgLyoqXG4gICAqIEdldCBlbGVtZW50IGluIHJhbmdlIGZyb20gYXJyYXlcbiAgICogQHBhcmFtIHN0YXJ0IHN0YXJ0IG51bWJlciBpbmRleFxuICAgKiBAcGFyYW0gZW5kIGVuZCBudW1iZXIgaW5kZXhcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgYXJyID0gWzEsIDIsIDMsIDQsIDVdO1xuICAgKiBjb25zb2xlLmxvZyhhcnIucmFuZ2UoMSwgMykpO1xuICAgKi9cbiAgcmFuZ2Uoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBBcnJheTxhbnk+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgc2VsZiBjb250YWlucyBubyBlbGVtZW50cy5cbiAgICogQHNlZSB7QGxpbmsgQXJyYXk8VD4ubGVuZ3RofVxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50LCBvciB0aGUgZmlyc3QgbiBlbGVtZW50cywgb2YgdGhlIGFycmF5LlxuICAgKiBJZiB0aGUgYXJyYXkgaXMgZW1wdHksIHJlcXVlc3Rpbmcgb25lIGVsZW1lbnQgcmV0dXJucyB1bmRlZmluZWQgLFxuICAgKiBhbmQgcmVxdWVzdGluZyBtdWx0aXBsZSBlbGVtZW50cyByZXR1cm5zIGFuIGVtcHR5IGFycmF5LlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIHZhciBhID0gWyBcInFcIiwgXCJyXCIsIFwic1wiLCBcInRcIiBdXG4gICAqICAgYS5maXJzdCgpICAgLy8gPT4gXCJxXCJcbiAgICogICBhLmZpcnN0KDIpICAvLyA9PiBbXCJxXCIsIFwiclwiXVxuICAgKi9cbiAgZmlyc3QobjogbnVtYmVyKTogQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhc3QgZWxlbWVudChzKSBvZiBzZWxmLlxuICAgKiBJZiB0aGUgYXJyYXkgaXMgZW1wdHksIHJldHVybnMgdW5kZWZpbmVkICBpZiBvbmx5IG9uZSBlbGVtZW50IHJlcXVlc3RlZC5cbiAgICogQGV4YW1wbGVcbiAgICogICB2YXIgYSA9IFsgXCJ3XCIsIFwieFwiLCBcInlcIiwgXCJ6XCIgXVxuICAgKiAgIGEubGFzdCgpICAgICAvLyA9PiBcInpcIlxuICAgKiAgIGEubGFzdCgyKSAgICAvLyA9PiBbXCJ5XCIsIFwielwiXVxuICAgKi9cbiAgbGFzdChuOiBudW1iZXIpOiBBcnJheTxUPjtcblxuICAvKipcbiAgICogVW5zZXQgZWxlbWVudCB2YWx1ZSBmcm9tIGFycmF5XG4gICAqIEBwYXJhbSBuIHZhbHVlIGVsZW1lbnRcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGFyciA9IFsnYScsJ2InLCdjJ107XG4gICAqIGFyci51bnNldCgnYycpO1xuICAgKiBjb25zb2xlLmxvZyhhcnIpOyAvLyBbJ2EnLCdiJ11cbiAgICovXG4gIHVuc2V0KG46IGFueSk6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBEZWxldGVzIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIHJldHVybmluZyB0aGF0IGVsZW1lbnQsIG9yIHVuZGVmaW5lZCAgaWYgdGhlIGluZGV4IGlzIG91dCBvZiByYW5nZS5cbiAgICogQSBuZWdhdGl2ZSBpbmRleCBpcyBjb3VudGVkIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXksIHdoZXJlIC0xIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IGVsZW1lbnQuIFJldHVybnMgc2VsZlxuICAgKiBmb3IgY2hhaW5pbmcgcHVycG9zZXMuXG4gICAqIEBleGFtcGxlXG4gICAqICAgdmFyIGEgPSBbXCJhbnRcIiwgXCJiYXRcIiwgXCJjYXRcIiwgXCJkb2dcIl1cbiAgICogICBhLmRlbGV0ZUF0KDIpICAgIC8vID0+IFwiY2F0XCJcbiAgICogICBhICAgICAgICAgICAgICAgIC8vID0+IFtcImFudFwiLCBcImJhdFwiLCBcImRvZ1wiXVxuICAgKiAgIGEuZGVsZXRlQXQoOTkpICAgLy8gPT4gdW5kZWZpbmVkIChiZWNhdXNlIGluZGV4IDk5IG5vdCBmb3VuZClcbiAgICogICBpZihhLmRlbGV0ZUF0KDEpKSBjb25zb2xlLmxvZygnaXRlbSB3aXRoIGluZGV4IDEgcmVtb3ZlZCcpIC8vIGNvbmRpdGlvbmFsXG4gICAqL1xuICBkZWxldGVBdChuOiBudW1iZXIpOiBBcnJheTxUPjtcblxuICAvKipcbiAgICogUmVtb3ZlcyBudWxsICBhbmQgdW5kZWZpbmVkICBlbGVtZW50cyBmcm9tIHRoZSBhcnJheSwgdHVybmluZyBpdCBpbnRvIGEgZGVuc2UgYXJyYXkuXG4gICAqIFJldHVybnMgc2VsZiBmb3IgY2hhaW5pbmcgcHVycG9zZXNcbiAgICovXG4gIGNvbXBhY3QoKTogQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIENoZWNrIGVsZW1lbnQgaW5kZXggZXhpc3RzXG4gICAqIEBleGFtcGxlXG4gICAqIFsnYScsJ2InXS5leGlzdHMoMSk7IC8vdHJ1ZVxuICAgKiBbJ2EnLCdiJ10uZXhpc3RzKDQpOyAvL2ZhbHNlXG4gICAqL1xuICBleGlzdHMobjogbnVtYmVyKTogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ2hlY2sgYXJyYXkgY29udGFpbnMgc3RyaW5nL2FueVxuICAgKiBAcGFyYW0gb2JqXG4gICAqIEBleGFtcGxlXG4gICAqIGFsZXJ0KFsxLCAyLCAzXS5jb250YWlucygyKSk7IC8vID0+IHRydWVcbiAgICogYWxlcnQoWzEsIDIsIDNdLmNvbnRhaW5zKCcyJykpOyAvLyA9PiBmYWxzZVxuICAgKi9cbiAgY29udGFpbnMob2JqOiBhbnkpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhcnJheSBvZmZzZXQgKGluZGV4KSBleGlzdHNcbiAgICogQHBhcmFtIG5cbiAgICogQGV4YW1wbGVcbiAgICogYWxlcnQoW3t9LCdhJywneCddLmhhc0luZGV4KDIpKTsgLy8gPT4gdHJ1ZSAtIGFycmF5IGhhcyBvZmZzZXQgMiBpcyAneCdcbiAgICogYWxlcnQoW3t9LCdhJywneCddLmhhc0luZGV4KDMpKTsgLy8gPT4gZmFsc2VcbiAgICovXG4gIGhhc0luZGV4KG46IG51bWJlcik6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFNodWZmbGUgYXJyYXlzLlxuICAgKiBAZGVzY3JpcHRpb24gUmFuZG9taXplIGFycmF5IGVsZW1lbnRzXG4gICAqIEBleGFtcGxlXG4gICAqIGFsZXJ0KFsxLDIsMyw0LDVdLnNodWZmbGUoKSlcbiAgICovXG4gIHNodWZmbGUoKTogQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBudWxsLCBlbXB0eSBzdHJpbmcsIG9yIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICovXG4gIHJlbW92ZUVtcHRpZXMoKTogQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIHRyaW0gYXJyYXkgb2Ygc3RyaW5nc1xuICAgKi9cbiAgdHJpbSgpOiBBcnJheTxzdHJpbmc+O1xufVxuXG5BcnJheS5wcm90b3R5cGUuc2h1ZmZsZSA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGkgPSB0aGlzLmxlbmd0aCxcbiAgICBqOiBudW1iZXIsXG4gICAgdGVtcDogYW55O1xuICBpZiAoaSA9PSAwKSByZXR1cm4gdGhpcztcbiAgd2hpbGUgKC0taSkge1xuICAgIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICB0ZW1wID0gdGhpc1tpXTtcbiAgICB0aGlzW2ldID0gdGhpc1tqXTtcbiAgICB0aGlzW2pdID0gdGVtcDtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbkFycmF5LnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24gKG4pIHtcbiAgaWYgKCFuKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIHRoaXNbdGhpcy5sZW5ndGggLSAxXTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgc3RhcnQgPSB0aGlzLmxlbmd0aCAtIG47XG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwO1xuXG4gICAgcmV0dXJuIHRoaXMuc2xpY2Uoc3RhcnQsIHRoaXMubGVuZ3RoKTtcbiAgfVxufTtcblxuQXJyYXkucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1hcCgoc3RyKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBzdHIgPT0gJ3N0cmluZycpIHJldHVybiBzdHIudHJpbSgpO1xuICB9KTtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDA7XG59O1xuXG5BcnJheS5wcm90b3R5cGUucmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIHRoaXMuc2xpY2Uoc3RhcnQsIGVuZCArIDEpO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHRoaXMucHVzaChlbGVtZW50KTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5BcnJheS5wcm90b3R5cGUuYWRkQWxsID0gZnVuY3Rpb24gKC4uLm90aGVyQXJyYXlzKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBvdGhlckFycmF5cy5mb3JFYWNoKGZ1bmN0aW9uIChhcnJheSkge1xuICAgIGFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHNlbGYucHVzaChpdGVtKTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBzZWxmO1xufTtcblxuQXJyYXkucHJvdG90eXBlLnJhbmRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5sZW5ndGgpXTtcbn07XG5cbkFycmF5LnByb3RvdHlwZS51bmlxdWUgPSBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55Pikge1xuICBjb25zdCBhID0gdGhpcy5jb25jYXQoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgYS5sZW5ndGg7ICsraikge1xuICAgICAgaWYgKGFbaV0gPT09IGFbal0pIGEuc3BsaWNlKGotLSwgMSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGE7XG59O1xuXG5BcnJheS5wcm90b3R5cGUudW5pcXVlU3RyaW5nQXJyYXkgPSBmdW5jdGlvbiAodGhpczogQXJyYXk8c3RyaW5nPikge1xuICBjb25zdCBmaWx0ZXIgPSBuZXcgTWFwKHRoaXMubWFwKChzKSA9PiBbcy50b0xvd2VyQ2FzZSgpLCBzXSkpO1xuICByZXR1cm4gWy4uLmZpbHRlci52YWx1ZXMoKV07XG59O1xuXG5BcnJheS5wcm90b3R5cGUudW5pcXVlT2JqZWN0S2V5ID0gZnVuY3Rpb24gKHRoaXM6IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+Piwga2V5LCByZW1vdmVOdWxsID0gdHJ1ZSkge1xuICBpZiAoIWtleSkgcmV0dXJuIHRoaXM7XG4gIGNvbnN0IHJlc0FyciA9IFtdO1xuICB0aGlzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgIGNvbnN0IGkgPSByZXNBcnIuZmluZEluZGV4KCh4KSA9PiB4W2tleV0gPT0gaXRlbVtrZXldKTtcbiAgICBpZiAoaSA8PSAtMSkge1xuICAgICAgaWYgKHJlbW92ZU51bGwpIHtcbiAgICAgICAgaWYgKGl0ZW1ba2V5XSkgcmVzQXJyLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNBcnIucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xuICByZXR1cm4gcmVzQXJyO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKG9iaikge1xuICBsZXQgaSA9IHRoaXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHRoaXNbaV0gPT09IG9iaikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5oYXNJbmRleCA9IGZ1bmN0aW9uIChuOiBudW1iZXIpIHtcbiAgcmV0dXJuIHR5cGVvZiB0aGlzW25dICE9ICd1bmRlZmluZWQnO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKG4pIHtcbiAgaWYgKCFuKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIHRoaXNbMF07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG5cbiAgICByZXR1cm4gdGhpcy5zbGljZSgwLCBuKTtcbiAgfVxufTtcblxuQXJyYXkucHJvdG90eXBlLmNvbXBhY3QgPSBmdW5jdGlvbiAoKSB7XG4gIC8vdmFyIGNoYW5nZXMgPSBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gSWYgZWxlbWVudCBpcyBub24tZXhpc3RlbnQsIHVuZGVmaW5lZCBvciBudWxsLCByZW1vdmUgaXQuXG4gICAgaWYgKCF0aGlzW2ldKSB7XG4gICAgICB0aGlzLnNwbGljZShpLCAxKTtcbiAgICAgIGkgPSBpIC0gMTtcbiAgICAgIC8vY2hhbmdlcyA9IHRydWU7XG4gICAgfVxuICB9XG4gIC8vaWYgKCFjaGFuZ2VzKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmRlbGV0ZUF0ID0gZnVuY3Rpb24gPFQ+KHRoaXM6IFRbXSwgaW5kZXgpOiBUIHtcbiAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSB0aGlzLmxlbmd0aCArIGluZGV4O1xuXG4gIC8vIElmIGVsZW1lbnQgaXMgbm9uLWV4aXN0ZW50LCByZXR1cm4gdW5kZWZpbmVkOlxuICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoaW5kZXgpKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gIGNvbnN0IGVsZW0gPSB0aGlzW2luZGV4XTtcbiAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICByZXR1cm4gZWxlbTtcbn07XG5cbkFycmF5LnByb3RvdHlwZS51bnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBpZiAodGhpcy5pbmRleE9mKHZhbHVlKSAhPSAtMSkge1xuICAgIC8vIE1ha2Ugc3VyZSB0aGUgdmFsdWUgZXhpc3RzXG4gICAgdGhpcy5zcGxpY2UodGhpcy5pbmRleE9mKHZhbHVlKSwgMSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5BcnJheS5wcm90b3R5cGUuZXhpc3RzID0gZnVuY3Rpb24gKG46IG51bWJlcikge1xuICByZXR1cm4gdHlwZW9mIHRoaXNbbl0gIT09ICd1bmRlZmluZWQnO1xufTtcblxuaWYgKCFBcnJheS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2V2ZXJ5JykpIHtcbiAgQXJyYXkucHJvdG90eXBlLmV2ZXJ5ID0gZnVuY3Rpb24gKGZ1bjogYW55IC8qLCB0aGlzcCAqLykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBjb25zdCB0OiB7IFt4OiBzdHJpbmddOiBhbnk7IGxlbmd0aDogbnVtYmVyIH0gPSBPYmplY3QodGhpcyk7XG4gICAgY29uc3QgbGVuID0gdC5sZW5ndGggPj4+IDA7XG4gICAgbGV0IGk6IHN0cmluZyB8IG51bWJlcjtcbiAgICBjb25zdCB0aGlzcDogYW55ID0gYXJndW1lbnRzWzFdO1xuXG4gICAgaWYgKHRoaXMgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZnVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoaSBpbiB0ICYmICFmdW4uY2FsbCh0aGlzcCwgdFtpXSwgaSwgdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xufVxuXG5BcnJheS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICBjb25zdCBpdGVtUmVtb3ZlZCA9IHRoaXMuc3BsaWNlKGZyb20sIDEpOyAvLyBzcGxpY2UoKSByZXR1cm5zIHRoZSByZW1vdmUgZWxlbWVudCBhcyBhbiBhcnJheVxuICB0aGlzLnNwbGljZSh0bywgMCwgaXRlbVJlbW92ZWRbMF0pOyAvLyBJbnNlcnQgaXRlbVJlbW92ZWQgaW50byB0aGUgdGFyZ2V0IGluZGV4XG4gIHJldHVybiB0aGlzO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmhhcHVzSXRlbURhcmlBcnJheUxhaW4gPSBmdW5jdGlvbiAodGhpczogYW55W10sIC4uLmFycmF5TGFpbikge1xuICBsZXQgdGhpc0FyciA9IHRoaXM7XG4gIGFycmF5TGFpbi5mb3JFYWNoKChvdGhlckFycikgPT4ge1xuICAgIHRoaXNBcnIgPSB0aGlzQXJyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiAhb3RoZXJBcnIuaW5jbHVkZXMoZWwpO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGhpc0Fycjtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5yZW1vdmVFbXB0aWVzID0gZnVuY3Rpb24gKHRoaXM6IGFueVtdKSB7XG4gIGNvbnN0IGZpbHRlciA9IHRoaXMuZmlsdGVyKGZ1bmN0aW9uIChlbDogc3RyaW5nIHwgYW55KSB7XG4gICAgY29uc3Qgbm90bnVsbCA9XG4gICAgICAvLyBtYWtlIHN1cmUgZWxlbWVudCBpcyBub3QgbnVsbFxuICAgICAgZWwgIT0gbnVsbCAmJlxuICAgICAgLy8gbWFrZSBzdXJlIGVsZW1lbnQgaXMgbm90IHVuZGVmaW5lZFxuICAgICAgdHlwZW9mIGVsICE9ICd1bmRlZmluZWQnO1xuICAgIC8vIGlmIGVsZW1lbnQgaXMgc3RyaW5nLCBtYWtlIHN1cmUgc3RyaW5nIGxlbmd0aCBub3QgemVyb1xuICAgIGlmICh0eXBlb2YgZWwgPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBub3RudWxsICYmIGVsLnRyaW0oKS5sZW5ndGggPiAwO1xuICAgIH1cbiAgICByZXR1cm4gbm90bnVsbDtcbiAgfSk7XG4gIHJldHVybiBmaWx0ZXI7XG59O1xuXG4vKipcbiAqIHNwbGl0IGFycmF5IHRvIGNodW5rc1xuICogQHBhcmFtIHNvdXJjZUFycmF5XG4gKiBAcGFyYW0gY2h1bmtTaXplXG4gKiBAc2VlIHtAbGluayBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNzE0ODM3NjAvNjQwNDQzOX1cbiAqIEByZXR1cm5zXG4gKiBAZXhhbXBsZVxubGV0IGFyMSA9IFtcbiAgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTksIDIwXG5dO1xuLy8gc3BsaXQgYXJyYXkgYnkgNFxuY29uc29sZS5sb2coXCJTcGxpdCBpbiBjaHVua3Mgd2l0aCA0IHNpemVcIiwgc3BsaXRDaHVua3MoYXIxLCA0KSk7IC8vIFtbMSwyLDMsNF0sIFs1LDYsNyw4XS4uLl1cbiAqL1xuZnVuY3Rpb24gYXJyYXlfc3BsaXRfY2h1bmtzPFQgZXh0ZW5kcyBhbnlbXT4oc291cmNlQXJyYXk6IFQsIGNodW5rU2l6ZTogbnVtYmVyKTogVFtdIHtcbiAgaWYgKGNodW5rU2l6ZSA8PSAwKSB0aHJvdyAnY2h1bmtTaXplIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnO1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2VBcnJheS5sZW5ndGg7IGkgKz0gY2h1bmtTaXplKSB7XG4gICAgcmVzdWx0W2kgLyBjaHVua1NpemVdID0gc291cmNlQXJyYXkuc2xpY2UoaSwgaSArIGNodW5rU2l6ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbl9nbG9iYWwuYXJyYXlfc3BsaXRfY2h1bmtzID0gYXJyYXlfc3BsaXRfY2h1bmtzO1xuQXJyYXkucHJvdG90eXBlLnNwbGl0X2NodW5rcyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhcnJheV9zcGxpdF9jaHVua3ModGhpcywgc2l6ZSk7XG59O1xuXG5mdW5jdGlvbiBhcnJheV9maWx0ZXIoYXJyYXk6IFtdKSB7XG4gIHJldHVybiBhcnJheS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgcmV0dXJuIGVsICE9IG51bGw7XG4gIH0pO1xufVxuX2dsb2JhbC5hcnJheV9maWx0ZXIgPSBhcnJheV9maWx0ZXI7XG5cbi8qKlxuICogcGljayByYW5kb20gZnJvbSBhcnJheVxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBhcnJheXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdW5pcXVlIFVuaXF1ZSB0aGUgYXJyYXlzXG4gKi9cbmZ1bmN0aW9uIGFycmF5X3JhbmQoYXJyYXlzOiBhbnlbXSwgdW5pcXVlOiBhbnkpIHtcbiAgaWYgKHVuaXF1ZSkge1xuICAgIGFycmF5cyA9IGFycmF5X3VuaXF1ZShhcnJheXMpO1xuICB9XG4gIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXlzLmxlbmd0aCk7XG4gIHJldHVybiB7XG4gICAgaW5kZXg6IGluZGV4LFxuICAgIHZhbHVlOiBhcnJheXNbaW5kZXhdLFxuICB9O1xufVxuX2dsb2JhbC5hcnJheV9yYW5kID0gYXJyYXlfcmFuZDtcblxuLyoqXG4gKiBBcnJheSB1bmlxdWVcbiAqIEBwYXJhbSB7QXJyYXk8YW55Pn0gYXJyYXlzXG4gKi9cbmZ1bmN0aW9uIGFycmF5X3VuaXF1ZShhcnJheXM6IGFueVtdKSB7XG4gIHJldHVybiBhcnJheXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtOiBhbnksIHBvczogYW55LCBzZWxmOiBzdHJpbmcgfCBhbnlbXSkge1xuICAgIHJldHVybiBzZWxmLmluZGV4T2YoaXRlbSkgPT0gcG9zO1xuICB9KTtcbn1cbl9nbG9iYWwuYXJyYXlfdW5pcXVlID0gYXJyYXlfdW5pcXVlO1xuXG4vKipcbiAqIFVuc2V0IGFycmF5XG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFycmF5TmFtZVxuICogQHBhcmFtIHtTdHJpbmd8bnVtYmVyfSBrZXlcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuZnVuY3Rpb24gYXJyYXlfdW5zZXQoYXJyYXlOYW1lOiB7IFt4OiBzdHJpbmddOiBhbnkgfSwga2V5OiBhbnkpIHtcbiAgbGV0IHg6IHN0cmluZyB8IG51bWJlcjtcbiAgY29uc3QgdG1wQXJyYXkgPSBbXTtcbiAgZm9yICh4IGluIGFycmF5TmFtZSkge1xuICAgIGlmICh4ICE9IGtleSkge1xuICAgICAgdG1wQXJyYXlbeF0gPSBhcnJheU5hbWVbeF07XG4gICAgfVxuICB9XG4gIHJldHVybiB0bXBBcnJheTtcbn1cbl9nbG9iYWwuYXJyYXlfdW5zZXQgPSBhcnJheV91bnNldDtcblxuLyoqXG4gKiBQSFAgc2h1ZmZsZSBhcnJheSBlcXVpdmFsZW50XG4gKiBAcGFyYW0gYXJyYXlcbiAqIEBleGFtcGxlXG4gKiB2YXIgYXJyID0gWzIsIDExLCAzNywgNDJdO1xuICogc2h1ZmZsZShhcnIpO1xuICogY29uc29sZS5sb2coYXJyKTsgLy9yZXR1cm4gcmFuZG9tXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXk6IEFycmF5PGFueT4pIHtcbiAgbGV0IGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aCxcbiAgICB0ZW1wb3JhcnlWYWx1ZTogYW55LFxuICAgIHJhbmRvbUluZGV4OiBudW1iZXI7XG5cbiAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuLi5cbiAgd2hpbGUgKDAgIT09IGN1cnJlbnRJbmRleCkge1xuICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC4uLlxuICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KTtcbiAgICBjdXJyZW50SW5kZXggLT0gMTtcblxuICAgIC8vIEFuZCBzd2FwIGl0IHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudC5cbiAgICB0ZW1wb3JhcnlWYWx1ZSA9IGFycmF5W2N1cnJlbnRJbmRleF07XG4gICAgYXJyYXlbY3VycmVudEluZGV4XSA9IGFycmF5W3JhbmRvbUluZGV4XTtcbiAgICBhcnJheVtyYW5kb21JbmRleF0gPSB0ZW1wb3JhcnlWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cbl9nbG9iYWwuc2h1ZmZsZSA9IHNodWZmbGU7XG5cbmZ1bmN0aW9uIGFycmF5Q29tcGFyZShhMTogQXJyYXk8YW55PiwgYTI6IEFycmF5PGFueT4pIHtcbiAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgbGVuZ3RoID0gYTIubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGExW2ldICE9PSBhMltpXSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuX2dsb2JhbC5hcnJheUNvbXBhcmUgPSBhcnJheUNvbXBhcmU7XG5cbi8qKlxuICogaW5fYXJyYXkgUEhQIGVxdWl2YWxlbnRcbiAqIEBwYXJhbSBuZWVkbGUgc3RyaW5nIGV0Y1xuICogQHBhcmFtIGhheXN0YWNrXG4gKi9cbmZ1bmN0aW9uIGluQXJyYXkobmVlZGxlOiBhbnksIGhheXN0YWNrOiBBcnJheTxhbnk+KSB7XG4gIGNvbnN0IGxlbmd0aCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICh0eXBlb2YgaGF5c3RhY2tbaV0gPT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChhcnJheUNvbXBhcmUoaGF5c3RhY2tbaV0sIG5lZWRsZSkpIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaGF5c3RhY2tbaV0gPT0gbmVlZGxlKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIGluX2FycmF5IFBIUCBlcXVpdmFsZW50XG4gKiBAcGFyYW0gbmVlZGxlIHN0cmluZyBldGNcbiAqIEBwYXJhbSBoYXlzdGFja1xuICovXG5mdW5jdGlvbiBpbl9hcnJheShuZWVkbGU6IGFueSwgaGF5c3RhY2s6IEFycmF5PGFueT4pIHtcbiAgcmV0dXJuIGluQXJyYXkobmVlZGxlLCBoYXlzdGFjayk7XG59XG5fZ2xvYmFsLmluX2FycmF5ID0gaW5fYXJyYXk7XG5cbi8qKlxuICogZ2V0IGFsbCBrZXlzXG4gKiBAcGFyYW0gaGF5c3RhY2sgc3RyaW5nIGV0Y1xuICovXG5mdW5jdGlvbiBhcnJheV9rZXlzKGhheXN0YWNrOiBhbnkpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGhheXN0YWNrKTtcbn1cblxuLyoqXG4gKiBTaHVmZmxlcyBhcnJheSBpbiBwbGFjZS5cbiAqIEBwYXJhbSBhIGl0ZW1zIEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGl0ZW1zLlxuICovXG5mdW5jdGlvbiBhcnJheV9zaHVmZmxlKGE6IEFycmF5PGFueT4pIHtcbiAgbGV0IGo6IG51bWJlciwgeDogYW55LCBpOiBudW1iZXI7XG4gIGZvciAoaSA9IGEubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICB4ID0gYVtpXTtcbiAgICBhW2ldID0gYVtqXTtcbiAgICBhW2pdID0geDtcbiAgfVxuICByZXR1cm4gYTtcbn1cbl9nbG9iYWwuYXJyYXlfc2h1ZmZsZSA9IGFycmF5X3NodWZmbGU7XG5cbi8qKlxuICogRGVlcCBtZXJnZSB0d28gb3IgbW9yZSBvYmplY3RzIGludG8gdGhlIGZpcnN0LlxuICogKGMpIDIwMjEgQ2hyaXMgRmVyZGluYW5kaSwgTUlUIExpY2Vuc2UsIGh0dHBzOi8vZ29tYWtldGhpbmdzLmNvbVxuICogQHBhcmFtIG9iamVjdHMgIFRoZSBvYmplY3RzIHRvIG1lcmdlIHRvZ2V0aGVyXG4gKiBAcmV0dXJucyBNZXJnZWQgdmFsdWVzIG9mIGRlZmF1bHRzIGFuZCBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGRlZXBBc3NpZ24oLi4ub2JqZWN0czogUmVjb3JkPGFueSwgdW5rbm93bj5bXSk6IFJlY29yZDxhbnksIHVua25vd24+IHtcbiAgLy8gTWFrZSBzdXJlIHRoZXJlIGFyZSBvYmplY3RzIHRvIG1lcmdlXG4gIGNvbnN0IGxlbiA9IG9iamVjdHMubGVuZ3RoO1xuICBpZiAobGVuIDwgMSkgcmV0dXJuO1xuICBpZiAobGVuIDwgMikgcmV0dXJuIG9iamVjdHNbMF07XG5cbiAgLy8gTWVyZ2UgYWxsIG9iamVjdHMgaW50byBmaXJzdFxuICBmb3IgKGxldCBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0c1tpXSkge1xuICAgICAgaWYgKG9iamVjdHNbaV0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAvLyBJZiBpdCdzIGFuIG9iamVjdCwgcmVjdXJzaXZlbHkgbWVyZ2VcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBwdXNoIHRvIGtleVxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdHNbaV1ba2V5XSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgb2JqZWN0c1swXVtrZXldID0gZGVlcEFzc2lnbig8YW55Pm9iamVjdHNbMF1ba2V5XSB8fCB7fSwgPGFueT5vYmplY3RzW2ldW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9iamVjdHNbMF1ba2V5XSA9IG9iamVjdHNbaV1ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhcmd1bWVudHNbMF07XG59XG5fZ2xvYmFsLmRlZXBBc3NpZ24gPSBkZWVwQXNzaWduO1xuXG4vKipcbiAqIFJlbW92ZSBpdGVtIGZyb20gYXJyYXlcbiAqIEBwYXJhbSBhcnJcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlSXRlbTxUPihhcnI6IEFycmF5PFQ+LCB2YWx1ZTogVCk6IEFycmF5PFQ+IHtcbiAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZih2YWx1ZSk7XG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cbl9nbG9iYWwucmVtb3ZlSXRlbSA9IHJlbW92ZUl0ZW07XG4iXX0=