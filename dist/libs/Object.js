/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable no-prototype-builtins */
/* eslint-disable @typescript-eslint/triple-slash-reference */
const __global = (typeof window != 'undefined' ? window : global) /* node */;
Object.size = function (obj) {
    let size = 0, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key))
            size++;
    }
    return size;
};
Object.child = function (str, callback) {
    const self = this;
    if (self.hasOwnProperty(str)) {
        if (typeof callback == 'function') {
            return callback(self[str]);
        }
        else {
            return true;
        }
    }
    else {
        return undefined;
    }
};
Object.alt = function (str, alternative) {
    const self = this;
    if (self.hasOwnProperty(str)) {
        return self[str];
    }
    else {
        return alternative;
    }
};
Object.has = function (str) {
    return this.hasOwnProperty(str);
};
Object.each = function (callback) {
    for (const key in this) {
        //callback.call(scope, key, this[key]);
        callback.call(this[key]);
    }
};
Object.isEmpty = function () {
    return this.length === 0;
};
Object.replaceKeyFrom = function (anotherObj) {
    return Object.entries(this).reduce((op, [key, value]) => {
        const newKey = anotherObj[key];
        op[newKey || key] = value;
        return op;
    }, {});
    /*if (typeof anotherObj == 'object') {
      for (const key in anotherObj) {
        if (Object.prototype.hasOwnProperty.call(anotherObj, key)) {
          const element = anotherObj[key];
          def[key] = element;
        }
      }
    }*/
};
Object.prototype.merge = function (...others) {
    return mergeDeep(this, ...others);
};
/**
 * Join object to separated string
 * * [].join() equivalent
 * @param obj Object
 * @param separator default comma(,)
 * @returns Joined string
 */
function object_join(obj, separator = ',') {
    return Object.keys(obj)
        .map(function (k) {
        return obj[k];
    })
        .join(separator);
}
__global.object_join = object_join;
/**
 * Simple object check.
 * @param item
 * @returns
 * @example
 * ```js
 * console.log(isObject({a:'a'})); // true
 * console.log(isObject(['a','b'])); // false
 * ```
 */
function isObject(item) {
    return item && typeof item === 'object' && !Array.isArray(item);
}
__global.isObject = isObject;
/**
 * Deep merge two objects.
 * @param target
 * @param ...sources
 */
function mergeDeep(target, ...sources) {
    if (!sources.length)
        return target;
    const source = sources.shift();
    if (isObject(target) && isObject(source)) {
        for (const key in source) {
            if (isObject(source[key])) {
                if (!target[key])
                    Object.assign(target, { [key]: {} });
                mergeDeep(target[key], source[key]);
            }
            else {
                Object.assign(target, { [key]: source[key] });
            }
        }
    }
    return mergeDeep(target, ...sources);
}
__global.mergeDeep = mergeDeep;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JqZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL09iamVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxzREFBc0Q7QUFDdEQsMENBQTBDO0FBQzFDLDhEQUE4RDtBQUM5RCxNQUFNLFFBQVEsR0FBRyxDQUFDLE9BQU8sTUFBTSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFpQixDQUFDO0FBNEVwRixNQUFNLENBQUMsSUFBSSxHQUFHLFVBQVUsR0FBRztJQUN6QixJQUFJLElBQUksR0FBRyxDQUFDLEVBQ1YsR0FBUSxDQUFDO0lBQ1gsS0FBSyxHQUFHLElBQUksR0FBRyxFQUFFO1FBQ2YsSUFBSSxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQztZQUFFLElBQUksRUFBRSxDQUFDO0tBQ3JDO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsS0FBSyxHQUFHLFVBQVUsR0FBRyxFQUFFLFFBQVE7SUFDcEMsTUFBTSxJQUFJLEdBQVcsSUFBSSxDQUFDO0lBQzFCLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUM1QixJQUFJLE9BQU8sUUFBUSxJQUFJLFVBQVUsRUFBRTtZQUNqQyxPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUM1QjthQUFNO1lBQ0wsT0FBTyxJQUFJLENBQUM7U0FDYjtLQUNGO1NBQU07UUFDTCxPQUFPLFNBQVMsQ0FBQztLQUNsQjtBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxHQUFHLEdBQUcsVUFBVSxHQUFHLEVBQUUsV0FBVztJQUNyQyxNQUFNLElBQUksR0FBUSxJQUFJLENBQUM7SUFDdkIsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQzVCLE9BQU8sSUFBSSxDQUFDLEdB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QUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2FBQy9DO1NBQ0Y7S0FDRjtJQUVELE9BQU8sU0FBUyxDQUFDLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFDRCxRQUFRLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvdHJpcGxlLXNsYXNoLXJlZmVyZW5jZSAqL1xuY29uc3QgX19nbG9iYWwgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbCkgLyogbm9kZSAqLyBhcyBhbnk7XG5cbmludGVyZmFjZSBPYmplY3Qge1xuICBsZW5ndGg6IG51bWJlcjtcblxuICAvKipcbiAgICogRHluYW1pYyBLZXlcbiAgICovXG4gIFtzdHI6IHN0cmluZ106IGFueTtcblxuICAvKipcbiAgICogTWVyZ2UgdGhpcyBvYmplY3Qgd2l0aCBhbm90aGVyIG9iamVjdFxuICAgKi9cbiAgbWVyZ2U6ICguLi5vdGhlcjogUmVjb3JkPGFueSwgdW5rbm93bj5bXSkgPT4gUmVjb3JkPGFueSwgdW5rbm93bj47XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgT2JqZWN0XG4gICAqIEBwYXJhbSBjYWxsYmFjayBmdW5jdGlvbiBlYWNoIGVsZW1lbnRcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGEgPSB7J2EnLCduJ307XG4gICAqIGEuZWFjaChmdW5jdGlvbihlbCl7XG4gICAqICBjb25zb2xlLmxvZyhlbCk7IC8vYSwgbiBlYWNoIGl0ZXJhdGlvblxuICAgKiB9KVxuICAgKi9cbiAgZWFjaChjYWxsYmFjazogKGFyZzA6IGFueSkgPT4gYW55KTogYW55O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpcyBlbXB0eVxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuO1xuXG4gIHJlcGxhY2VLZXlGcm9tKGFub3RoZXJPYmo6IGFueSk6IGFueTtcbn1cblxuaW50ZXJmYWNlIE9iamVjdENvbnN0cnVjdG9yIHtcbiAgLyoqXG4gICAqIER5bmFtaWMgS2V5XG4gICAqL1xuICBbc3RyOiBzdHJpbmddOiBhbnk7XG5cbiAgLyoqXG4gICAqIENvdW50IHNpemUgbGVuZ3RoIG9mIG9iamVjdFxuICAgKi9cbiAgc2l6ZTogKG9iajogYW55KSA9PiBudW1iZXI7XG5cbiAgLy9bcGFpcjogc3RyaW5nfG51bWJlcl06IGFueTtcblxuICAvKipcbiAgICogSXMgT2JqZWN0IEhhcyBQcm9wZXJ0eSBvZiBrZXkgP1xuICAgKiBAcGFyYW0ga2V5XG4gICAqL1xuICBoYXNPd25Qcm9wZXJ0eShrZXk6IGFueSk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIGNoZWNrIGlmIGhhcyBjaGlsZCBhbmQgZ28gZm9yIGNhbGxiYWNrXG4gICAqIEBwYXJhbSBzdHIgIG1hdGNoIGNoaWxkIHByb3BlcnR5XG4gICAqIEBwYXJhbSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsYmFja1xuICAgKiBAYXV0aG9yIERpbWFzIExhbmpha2EgPGRpbWFzbGFuamFrYUBnbWFpbC5jb20+XG4gICAqL1xuICBjaGlsZChzdHI6IHN0cmluZyB8IG51bWJlciwgY2FsbGJhY2s6IChhcmc6IGFueSkgPT4gYW55KTogYW55O1xuXG4gIC8qKlxuICAgKiBjaGVjayBvYmplY3QgaGFzIGNoaWxkLCBpZiBub3QgZXhpc3QgcmV0dXJuIGFsdGVybmF0aXZlIHZhbHVlXG4gICAqIEBwYXJhbSBzdHIgbWF0Y2ggY2hpbGQgcHJvcGVydHlcbiAgICogQHBhcmFtIGFsdGVybmF0aXZlIGRlZmF1bHQgdmFsdWUgY2FsbGJhY2tcbiAgICogQGF1dGhvciBEaW1hcyBMYW5qYWthIDxkaW1hc2xhbmpha2FAZ21haWwuY29tPlxuICAgKi9cbiAgYWx0KHN0cjogYW55LCBhbHRlcm5hdGl2ZTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbik6IGFueTtcblxuICAvKipcbiAgICogQ2hlY2sgb2JqZWN0IGhhcyBjaGlsZFxuICAgKiBAcGFyYW0gc3RyXG4gICAqL1xuICBoYXMoc3RyOiBzdHJpbmcgfCBudW1iZXIpOiBhbnk7XG59XG5cbk9iamVjdC5zaXplID0gZnVuY3Rpb24gKG9iaikge1xuICBsZXQgc2l6ZSA9IDAsXG4gICAga2V5OiBhbnk7XG4gIGZvciAoa2V5IGluIG9iaikge1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgc2l6ZSsrO1xuICB9XG4gIHJldHVybiBzaXplO1xufTtcblxuT2JqZWN0LmNoaWxkID0gZnVuY3Rpb24gKHN0ciwgY2FsbGJhY2spIHtcbiAgY29uc3Qgc2VsZjogb2JqZWN0ID0gdGhpcztcbiAgaWYgKHNlbGYuaGFzT3duUHJvcGVydHkoc3RyKSkge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHNlbGZbc3RyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59O1xuXG5PYmplY3QuYWx0ID0gZnVuY3Rpb24gKHN0ciwgYWx0ZXJuYXRpdmUpIHtcbiAgY29uc3Qgc2VsZjogYW55ID0gdGhpcztcbiAgaWYgKHNlbGYuaGFzT3duUHJvcGVydHkoc3RyKSkge1xuICAgIHJldHVybiBzZWxmW3N0cl07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFsdGVybmF0aXZlO1xuICB9XG59O1xuXG5PYmplY3QuaGFzID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nIHwgbnVtYmVyKSB7XG4gIHJldHVybiB0aGlzLmhhc093blByb3BlcnR5KHN0cik7XG59O1xuXG5PYmplY3QuZWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzKSB7XG4gICAgLy9jYWxsYmFjay5jYWxsKHNjb3BlLCBrZXksIHRoaXNba2V5XSk7XG4gICAgY2FsbGJhY2suY2FsbCh0aGlzW2tleV0pO1xuICB9XG59O1xuXG5PYmplY3QuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAwO1xufTtcblxuT2JqZWN0LnJlcGxhY2VLZXlGcm9tID0gZnVuY3Rpb24gKGFub3RoZXJPYmopIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMpLnJlZHVjZSgob3AsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGNvbnN0IG5ld0tleSA9IGFub3RoZXJPYmpba2V5XTtcbiAgICBvcFtuZXdLZXkgfHwga2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBvcDtcbiAgfSwge30pO1xuICAvKmlmICh0eXBlb2YgYW5vdGhlck9iaiA9PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGFub3RoZXJPYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYW5vdGhlck9iaiwga2V5KSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gYW5vdGhlck9ialtrZXldO1xuICAgICAgICBkZWZba2V5XSA9IGVsZW1lbnQ7XG4gICAgICB9XG4gICAgfVxuICB9Ki9cbn07XG5cbk9iamVjdC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAodGhpczogUmVjb3JkPGFueSwgdW5rbm93bj4sIC4uLm90aGVycykge1xuICByZXR1cm4gbWVyZ2VEZWVwKHRoaXMsIC4uLm90aGVycyk7XG59O1xuXG4vKipcbiAqIEpvaW4gb2JqZWN0IHRvIHNlcGFyYXRlZCBzdHJpbmdcbiAqICogW10uam9pbigpIGVxdWl2YWxlbnRcbiAqIEBwYXJhbSBvYmogT2JqZWN0XG4gKiBAcGFyYW0gc2VwYXJhdG9yIGRlZmF1bHQgY29tbWEoLClcbiAqIEByZXR1cm5zIEpvaW5lZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gb2JqZWN0X2pvaW4ob2JqOiBSZWNvcmQ8YW55LCB1bmtub3duPiwgc2VwYXJhdG9yID0gJywnKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgLm1hcChmdW5jdGlvbiAoaykge1xuICAgICAgcmV0dXJuIG9ialtrXTtcbiAgICB9KVxuICAgIC5qb2luKHNlcGFyYXRvcik7XG59XG5fX2dsb2JhbC5vYmplY3Rfam9pbiA9IG9iamVjdF9qb2luO1xuXG4vKipcbiAqIFNpbXBsZSBvYmplY3QgY2hlY2suXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogY29uc29sZS5sb2coaXNPYmplY3Qoe2E6J2EnfSkpOyAvLyB0cnVlXG4gKiBjb25zb2xlLmxvZyhpc09iamVjdChbJ2EnLCdiJ10pKTsgLy8gZmFsc2VcbiAqIGBgYFxuICovXG5mdW5jdGlvbiBpc09iamVjdChpdGVtOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW0pO1xufVxuX19nbG9iYWwuaXNPYmplY3QgPSBpc09iamVjdDtcblxuLyoqXG4gKiBEZWVwIG1lcmdlIHR3byBvYmplY3RzLlxuICogQHBhcmFtIHRhcmdldFxuICogQHBhcmFtIC4uLnNvdXJjZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2VEZWVwKHRhcmdldDogUmVjb3JkPGFueSwgdW5rbm93bj4sIC4uLnNvdXJjZXM6IFJlY29yZDxhbnksIHVua25vd24+W10pIHtcbiAgaWYgKCFzb3VyY2VzLmxlbmd0aCkgcmV0dXJuIHRhcmdldDtcbiAgY29uc3Qgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuXG4gIGlmIChpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgW2tleV06IHt9IH0pO1xuICAgICAgICBtZXJnZURlZXAoPGFueT50YXJnZXRba2V5XSwgPGFueT5zb3VyY2Vba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgeyBba2V5XTogc291cmNlW2tleV0gfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpO1xufVxuX19nbG9iYWwubWVyZ2VEZWVwID0gbWVyZ2VEZWVwO1xuIl19